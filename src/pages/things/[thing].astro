---
import BaseLayout from '../../layouts/BaseLayout.astro';

import {fetchSquareCatalog, type sqCatalog} from '../../scripts/square';
import test_catalog from '../../assets/sample_catalog.json';
import Thing from '../../components/Thing.astro';

export async function getStaticPaths() {

  const catalog: sqCatalog = await fetchSquareCatalog();

  const things = [];

  catalog.items.forEach((product) => {
    // things.push({ params: { thing: product.name, product: product }});
    // things.push({ params: { thing: product.name }});
    things.push({ params: { thing: product.name }, props: { product: product }});
  });

  return things;
}

const { thing } = Astro.params;
const { product } = Astro.props;

---

<BaseLayout pageTitle={product.name}>
  <Thing product={product}/>
</BaseLayout>